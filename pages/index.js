import Head from 'next/head'
import styles from '../styles/Home.module.css'
import Script from 'next/script'
import SubscriptionEmail from '../components/subemail'
import Step1 from '../components/step1'
import Step2 from '../components/step2'
import Step3 from '../components/step3'
import { useState, useCallback} from 'react'
import { emailAtom, scriptAtom } from '../stores/Store'
import { useRecoilState, useRecoilValue } from 'recoil'



const RenderComponet = ({state }) => {
  const components = useCallback(() => {
    switch (state) {
      case 0:
        return  <Step1/>
      case 1:
        return <Step2/> 
      case 2: 
        return <Step3/>
    }
  },[state])

  return components()

  
 
}



export default function Home() {

  const [state, setState] = useState(0);
  
  const [scriptData, setScriptData] = useRecoilState(scriptAtom);


  const handleSubmit = () => {

  }
  

  return (
    <>
      <Head>
        <title> Pay Via UPI </title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
        
      </Head>
      <Script src='static/libs/main.js'
      async
    data-name="pay-via-upi"
    data-cfasync="false"
    data-pa='pratiksharma@boi'
    data-tn=""
    data-cu="INR"
    data-pn="Pratik Sharma"
    data-amount_list = "100, 500, 1000, 2000"
    data-label = "Donate via UPI"
    data-description="Scan and Pay using UPI!"
    data-color="#000"
    data-position="Right"
  
  strategy="beforeInteractive" ></Script>
      
      <div className={styles.container}>

      <main className={styles.main}>

        <h1 >Add  
          UPI Payment
            Option
            <br/>
             to your Website
            <br/>
            <span className='text-decoration'>
            Under 60 Seconds.
            </span>
        </h1>

   
        
        <button className='getStated'>
          Get Started
        </button>

     

      </main>

      <div className={styles.container}>
        <div className={styles.main}>
          <SubscriptionEmail/>
          <h3>Let&apos;s do this!!</h3>
        <RenderComponet state={state} scriptData={scriptData} setScriptData={setScriptData}/>

        <div className='flex js'>
          {
            state === 0 ? null: 
            <button  onClick={() => setState(state - 1)}>Back</button>

          }
      
               <button  onClick={() => setState(state + 1)}> Next</button>


        </div>
               
              

        </div>
      
      </div>

      <footer className={styles.footer}>
        <a
          href="https://twitter.com/biomathcode"
          target="_blank"
          rel="noopener noreferrer"
        >
          Created by { "\u2800"}
          <span className={styles.logo}>
          Pratik Sharma
          
          </span>
        </a>
      </footer>
    </div>
    </>
    
  )
}

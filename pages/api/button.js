export default function handler(req, res) {
  const data = req.query;

  const link = `https://www.donateviaupi.com/${data.upi}?amount_list=${data.amounts}&#38;pn=${data.name}`;
  console.log(data);
  const svgdata = `
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" viewBox="0 0 235 50" fill="none"><defs><pattern id="prefix__pattern0" patternContentUnits="objectBoundingBox" width="1" height="1"><use xlink:href="#prefix__image0" transform="scale(.01563)"/></pattern></defs><a xlink:href="${link}" target="_blank"><rect width="235" height="50" rx="10.776" fill='#${data.color}'/><g xmlns="http://www.w3.org/2000/svg"></g><path x="40" y="31" d="M2.78709 9.91471C2.78709 9.91471 2.75187 9.71641 2.68143 9.31982C2.60985 8.92428 2.66723 8.38553 2.85356 7.70356C3.03875 7.0216 3.27166 6.47812 3.55229 6.07314C3.83293 5.66816 4.18627 5.2637 4.61233 4.85977C5.03839 4.45688 5.53773 4.07656 6.11035 3.71879C6.68298 3.36207 7.32377 3.05151 8.03273 2.78712C8.7417 2.52377 9.50576 2.32967 10.3249 2.20482C11.1441 2.07997 11.9968 2.05007 12.883 2.11512C13.7692 2.17912 14.6537 2.35538 15.5365 2.6439C16.4204 2.93347 17.2589 3.34108 18.0519 3.86672C18.845 4.39236 19.5449 5.02553 20.1516 5.76625C20.7583 6.50697 21.2286 7.32691 21.5627 8.22605C21.8956 9.1252 22.062 10.059 22.062 11.0274C22.062 11.9957 21.8859 12.9447 21.5337 13.8743C21.1815 14.8028 20.668 15.6569 19.9931 16.4364C19.3193 17.2159 18.5235 17.8748 17.6054 18.413C16.6874 18.9513 15.7018 19.34 14.6486 19.5792C13.5965 19.8174 12.5387 19.8987 11.4753 19.8231C10.4107 19.7476 9.39897 19.5283 8.44005 19.1653C7.48113 18.8033 6.61936 18.3281 5.85472 17.7395C5.09122 17.1509 4.45157 16.4899 3.93575 15.7565C3.42221 15.0232 3.03989 14.2609 2.7888 13.4698C2.53771 12.6788 2.40875 11.8971 2.40193 11.1249C2.39398 10.3527 2.48601 9.61936 2.67802 8.92481C2.8689 8.23025 3.12908 7.59235 3.45856 7.01111C3.79032 6.42986 4.15843 5.90947 4.56291 5.44993C4.96624 4.99144 5.38492 4.59433 5.81893 4.25859C6.25294 3.9239 6.68184 3.64797 7.10563 3.43079C7.52828 3.21361 7.92821 3.04784 8.30541 2.93348C8.68148 2.81912 9.12515 2.7441 9.63642 2.70843C10.1488 2.67171 10.405 2.65387 10.405 2.65492C10.405 2.65492 10.405 2.65544 10.405 2.65649C10.405 2.65649 10.1869 2.75669 9.75061 2.95708C9.31318 3.15748 8.93428 3.33584 8.61388 3.49216C8.29235 3.64849 7.94468 3.83315 7.57089 4.04613C7.19709 4.26016 6.80909 4.51564 6.40689 4.81255C6.00469 5.11052 5.61045 5.46304 5.22415 5.87012C4.83786 6.27826 4.49019 6.74671 4.18116 7.2755C3.87212 7.80428 3.62671 8.38553 3.44493 9.01923C3.26314 9.65294 3.17111 10.3234 3.16884 11.0305C3.16771 11.7366 3.27678 12.4537 3.49606 13.1818C3.71761 13.91 4.06073 14.6129 4.52542 15.2907C4.9901 15.9695 5.57068 16.5833 6.26715 17.132C6.96475 17.6807 7.75381 18.1266 8.63433 18.4697C9.51486 18.8138 10.4454 19.0252 11.4259 19.1039C12.4064 19.1837 13.3835 19.1181 14.3572 18.9072C15.3297 18.6963 16.2415 18.3475 17.0925 17.8607C17.9423 17.3738 18.6802 16.7758 19.3063 16.0666C19.9323 15.3584 20.4112 14.5804 20.7429 13.7327C21.0736 12.886 21.2428 12.0209 21.2508 11.1375C21.2588 10.2541 21.1128 9.40165 20.8128 8.58015C20.514 7.75969 20.0885 7.01163 19.5363 6.33596C18.9853 5.66029 18.3485 5.08429 17.6259 4.60796C16.9033 4.13268 16.1404 3.7681 15.3371 3.51419C14.535 3.26029 13.7351 3.11236 12.9375 3.07039C12.1399 3.02738 11.3799 3.07354 10.6573 3.20888C9.93466 3.34528 9.27172 3.5462 8.66842 3.81164C8.06512 4.07708 7.52885 4.37819 7.05962 4.71498C6.59038 5.05177 6.18193 5.39852 5.83427 5.75524C5.48774 6.11091 5.18836 6.45819 4.93614 6.79707C4.68391 7.13596 4.38055 7.57189 4.02607 8.10487C3.67273 8.63681 3.37903 9.07169 3.14498 9.40953L2.78709 9.91471Z" stroke="#DA3434" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"  /><text x="40" y="31" fill="#fff" font-family="'Poppins',sans-serif" font-size="16" font-weight="700">${data.text}</text></a></svg>
  `;
  res.setHeader("content-type", "image/svg+xml");
  res.status(200).send(svgdata);
}
